
@{
    ViewBag.Title = "Invoice";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@model CyberLlamaConsumerSite.Models.Delivery



<img class="centerImage" Style="margin-top:4%;max-width: 100px;margin-top:20px" src="~/Images/llama.png" />
<h1 class="centerText" style="margin:10px 0px 40px 0px">Invoice</h1>
<div class="row" style="margin-top:3%;">
    <div class="col-md-6">
        <div class="centerText-Max1000" style="margin-left: auto; margin-right: auto;">
            <h3>Delivery Option:</h3>
            @if (Model.Method == "Collect")
            {
                <p><label style="font-size: 120%;margin:0">Collection</label></p>
            }
            else
            {
                <p><label style="font-size: 120%;margin:0">Address: </label> @Model.Address</p>
                <p><label style="font-size: 120%;margin:0">City: </label> @Model.City</p>
                <p><label style="font-size: 120%;margin:0">Province: </label> @Model.Province</p>
                <p><label style="font-size: 120%;margin:0">Zip Code: </label> @Model.ZipCode</p>
            }

        </div>
    </div>
    <div class="col-md-6">
        <div class="centerText-Max1000" style="margin-left: auto; margin-right: auto;">
            <h3>User Details:</h3>
            <p><label style="font-size: 120%;margin:0">Fist Name: </label> @Model.FirstName</p>
            <p><label style="font-size: 120%;margin:0">Surname: </label> @Model.Surname</p>
            <p><label style="font-size: 120%;margin:0">Email: </label> @Model.Email</p>
            <p><label style="font-size: 120%;margin:0">Zip Code: </label> @Model.ZipCode</p>
        </div>
    </div>
</div>


            <hr color="white" />
            <div style="display:grid;grid-column-gap: 5px; grid-row-gap: 0px; ">
                <div style="grid-column-start: 1;grid-column-end: 2;grid-row-start: 1;grid-row-end: 2;width: 100px; height: 40px;margin: 0 auto;color:white;"><b>Image</b></div>
                <div style="grid-column-start: 2;grid-column-end: 3;grid-row-start: 1;grid-row-end: 2;width: 100px; height: 40px;margin: 0 auto;color:white;"><b>Description</b></div>
                <div style="grid-column-start: 3;grid-column-end: 4;grid-row-start: 1;grid-row-end: 2;width: 100px;height: 40px;margin: 0 auto;color:white;"><b>Unit Price</b></div>
                <div style="grid-column-start: 4;grid-column-end: 5;grid-row-start: 1;grid-row-end: 2;width: 100px;height: 40px;margin: 0 auto;color:white;"><b>Discount</b></div>
                <div style="grid-column-start: 5;grid-column-end: 6;grid-row-start: 1;grid-row-end: 2;width: 100px;height: 40px;margin: 0 auto;color:white;"><b>Quantity</b></div>


                @{decimal total = 0; }
                @for (int i = 0; i < Model.Products.Count; i++)
                {
                    <div style="grid-column-start: 1;grid-column-end: 2;grid-row-start: @(i + 2);grid-row-end: @(i + 3);width: 150px;height: 70px;margin: 0 auto;"><img style="max-height:50px;" src=@Url.Content(Model.Products[i].ImageLink)></div>
                    <div style="grid-column-start: 2;grid-column-end: 3;grid-row-start: @(i + 2);grid-row-end: @(i + 3);width: 150px;height: 70px;margin: 0 auto;">@Model.Products[i].Name</div>
                    <div style="grid-column-start: 3;grid-column-end: 4;grid-row-start: @(i + 2);grid-row-end: @(i + 3);width: 150px;height: 70px;margin: 0 auto;">R @Math.Round(Model.Products[i].Price, 2)</div>
                    <div style="grid-column-start: 4;grid-column-end: 5;grid-row-start: @(i + 2);grid-row-end: @(i + 3);width: 150px;height: 70px;margin: 0 auto;">@Model.Products[i].Discount % </div>
                    <div style="grid-column-start: 5;grid-column-end: 6;grid-row-start: @(i + 2);grid-row-end: @(i + 3);width: 150px;height: 70px;margin: 0 auto;">@Model.Products[i].Quantity</div>
                }
            </div>
            <hr color="white" />
            <div style="text-align:right">
                <h4>SubTotal: R @Model.SubTotal</h4>
                <h4>Discount: R @Model.Discount</h4>
                <h4>Tax: R @Model.Tax</h4>
                <h4>Total: R @Model.Total</h4>
                <hr color="white" />
                <button id="edit" onclick="location.href='@Url.Action("Cart", "Checkout")'" style="margin:10px">Edit</button>
                <button id="purchase" href=@Url.Action("BuyProduct", new { invoice = @Model }) style="margin:10px">Confirm and Purchase</button>

                <script>
                    $("#purchase").click(function (e) {
                        e.preventDefault();
                        $.ajax({
                            url: $(this).attr("href"),
                            success: function () {
                                alert("Item Purchased");
                            },
                            error: function () {
                                alert("An error Occured, Login to access Cart");
                            }

                        });
                    });
                </script>
            </div>


